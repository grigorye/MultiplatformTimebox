
name: paths-filter

on:
  workflow_call:
    outputs:
      should-build-app:
        description: 'Whether to build app or not'
        value: ${{ jobs.paths-filter.outputs.should-build-app }}
      should-test:
        description: 'Whether to test or not'
        value: ${{ jobs.paths-filter.outputs.should-test }}

jobs:
  paths-filter:
    name: 'Check Paths'
    runs-on: ubuntu-latest
    permissions:
      pull-requests: read
    outputs:
      should-build-app: ${{ steps.build_check.outputs.should-build-or-test }}
      should-test: ${{ steps.build_check.outputs.should-build-or-test }}
    steps:
      - id: build-check
        if: github.event_name == 'pull_request'
        uses: dorny/paths-filter@v2
        with:
          filters: |
            should-build-or-test:
              - '.github/**'
              - '*.swift'
              - '*.xcodeproj'
              - '*.xcworkspace'
              - 'Brewfile.*'
              - 'Brewfile'
              - 'Commands/**'
              - 'Derived'
              - 'dist/**'
              - 'GHAScripts/**'
              - 'GHAShortcuts/**'
              - 'Mintfile'
              - 'Modules/**'
              - 'project.yml'
              - 'ReusableWorkflows/**'
              - 'Sources/**'
              - 'Targets/**'
              - 'ThirdParties/**'
              - 'Tuist'
              - 'Xcodegen/**'
              - 'Xcodeproj/**'
